{% extends 'base.html' %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'detail.css' %}">
<style>
* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box; }

body {
  background: url('https://images.unsplash.com/photo-1507924538820-ede94a04019d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1950&q=80');
  background-size : cover;
}
header {
  display: block;
  overflow: hidden;
  position: relative;
  padding-bottom: 2em;
  -moz-border-radius-topleft: 8px;
  -webkit-border-top-left-radius: 8px;
  border-top-left-radius: 8px;
  -moz-border-radius-topright: 8px;
  -webkit-border-top-right-radius: 8px;
  border-top-right-radius: 8px; }

.container {
  width: 320px;
  margin: 3em auto 1em auto;
  -webkit-border-radius: 8px;
  -moz-border-radius: 8px;
  -ms-border-radius: 8px;
  -o-border-radius: 8px;
  border-radius: 8px;
  padding-bottom: 1.5em;
  background-color: #dde1e2;
  -webkit-box-shadow: #bdc3c7 0 5px 5px;
  -moz-box-shadow: #bdc3c7 0 5px 5px;
  box-shadow: #bdc3c7 0 5px 5px; }

.bg {
  border-bottom: 8px solid #5cc0ff; }

.bio:hover > .desc {
  cursor: pointer;
  opacity: 1; }

.avatarcontainer {
  position: absolute;
  bottom: 0;
  right: 0;
  left: 0;
  margin: auto;
  width: 70px;
  height: 70px;
  display: block; }
  .avatarcontainer:hover > .hover {
    opacity: 1; }

.avatar {
  width: 100%;
  border: 8px solid #5cc0ff;
  -webkit-border-radius: 50%;
  -moz-border-radius: 50%;
  -ms-border-radius: 50%;
  -o-border-radius: 50%;
  border-radius: 50%;
  overflow: hidden;
  position: relative; }
  .avatar img {
    width: 65px;
    height: 65px; }
  .avatar:hover + .hover {
    opacity: 1;
    cursor: pointer; }

.hover {
  position: absolute;
  cursor: pointer;
  width: 100%;
  height: 100%;
  background-color: #3498db;
  top: 0;
  font-size: 1.8em;
  text-align: center;
  color: white;
  padding-top: 18%;
  opacity: 0;
  font-family: 'FontAwesome';
  font-weight: 300;
  border: 8px solid #5cc0ff;
  -webkit-border-radius: 50%;
  -moz-border-radius: 50%;
  -ms-border-radius: 50%;
  -o-border-radius: 50%;
  border-radius: 50%;
  -webkit-transition-property: all;
  -moz-transition-property: all;
  -o-transition-property: all;
  transition-property: all;
  -webkit-transition-duration: 0.5s;
  -moz-transition-duration: 0.5s;
  -o-transition-duration: 0.5s;
  transition-duration: 0.5s;
  -webkit-transition-timing-function: ease;
  -moz-transition-timing-function: ease;
  -o-transition-timing-function: ease;
  transition-timing-function: ease; }

.data {
  margin-top: .6em;
  color: #81878b; }
  .data li {
    width: 32%;
    text-align: center;
    display: inline-block;
    font-size: 1.5em;
    font-family: 'Lato';
    border-right: solid 1px #bdc3c7; }
    .data li:last-child {
      border: none; }
    .data li span {
      display: block;
      text-transform: uppercase;
      font-family: 'Quicksand';
      font-size: .5em;
      margin-top: .6em;
      font-weight:700;
    }

.desc {
  position: absolute;
  top: 0;
  background-color: rgba(0, 0, 0, 0.6);
  width: 100%;
  height: 171px;
  padding: 1.2em 1em 0 1em;
  color: white;
  text-align: center;
  opacity: 0;
  -webkit-transition-property: all;
  -moz-transition-property: all;
  -o-transition-property: all;
  transition-property: all;
  -webkit-transition-duration: 0.3s;
  -moz-transition-duration: 0.3s;
  -o-transition-duration: 0.3s;
  transition-duration: 0.3s;
  -webkit-transition-timing-function: ease-in;
  -moz-transition-timing-function: ease-in;
  -o-transition-timing-function: ease-in;
  transition-timing-function: ease-in; }
  .desc h3 {
    font-family: "Lato";
    font-size: 1.2em;
    margin-bottom: .5em; }
  .desc p {
    font-size: .9em;
    font-family: 'Quicksand';
    line-height: 1.5em; }

.follow {
  margin: 1.5em auto 0 auto;
  background-color: #2589cc;
  width: 150px;
  color: white;
  font-family: "Lato";
  text-align: center;
  padding: .5em;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  -ms-border-radius: 5px;
  -o-border-radius: 5px;
  border-radius: 5px;
  -webkit-transition-property: all;
  -moz-transition-property: all;
  -o-transition-property: all;
  transition-property: all;
  -webkit-transition-duration: 0.3s;
  -moz-transition-duration: 0.3s;
  -o-transition-duration: 0.3s;
  transition-duration: 0.3s;
  -webkit-transition-timing-function: ease;
  -moz-transition-timing-function: ease;
  -o-transition-timing-function: ease;
  transition-timing-function: ease; }
  .follow:hover {
    background-color: #167abd;
    cursor: pointer; }
</style>
{% endblock %}
{% block body %}
<div class="container">
		<header>
			<div class="bio">
        <img src="http://www.croop.cl/UI/twitter/images/up.jpg" alt="background" class="bg">
				<div class="desc">
					<p>반갑습니다!!</p>
				</div>
			</div>
			
      {% if user_profile.image %}
        <div class="avatarcontainer">
          <img src="{{ user_profile.image.url}}" alt="프사등록" class="avatar">
        </div>
          {% else %}
          <img src="https://i.pinimg.com/474x/af/7d/01/af7d017895eee4152af628507818cf64.jpg" alt="프사등록" class="avatar" style="width: 70px; height: 70px;">
          {% endif %}


		</header>
    
    {% with user_profile.followers.all as followers %}
		<div class="content">
			<div class="data">
				<ul class="row" style="left:50%">
					<li class="col">
              {{ followers|length }}
						<span>Followers</span>
					</li>
					<li class="col">
              {{ user_profile.followings.all.count }}
						<span>Following</span>
					</li>
				</ul>
			</div>

      <a href="{% url 'accounts:follow' user_profile.pk %}">
      {% if user in followers %} 
      <div class="follow"> <div class="icon-twitter"></div> UnFollow</div>
      {% else %}
      
			<div class="follow"> <div class="icon-twitter"></div> Follow</div>
      {% endif %}
    </a>
		</div>
    <div>
    </div>
	</div>
  
  {% endwith %}


<h4 style="color: wheat;">{{user_profile.username}}님이 평점등록한 영화</h4>
<div class="row">
    {% for review in user_profile.review_set.all %}
    <figure class="snip1273">
        <img src="{{review.movie.poster_url}}" alt="img" style="width: 200px;">
        <figcaption>
            <p>영화 : {{review.movie.title}} <br> 평가 : {{review.content}} <br> 평점 : {{ review.score }}</p>
        </figcaption>
        <a href="{% url 'movies:detail' review.movie.id %}"></a>
        <p style="text-align: center;">{{review.movie.title}}</p>
    </figure>
    
    {% endfor %}
    <hr>
    </div>

<hr>
<h4 style="color: wheat;">{{user_profile.username}}님이 좋아하는 영화 </h4>
<div class="row">
    {% for like in user_profile.like_movies.all %}
    <figure class="snip1273">
        <img src="{{like.poster_url}}" alt="img" style="width: 200px;">
        <figcaption>
            <p>영화 : {{like.title}} <br> <p>좋아요갯수 : {{ like.like_users.count}} 개</p>

        </figcaption>
        <a href="{% url 'movies:detail' like.id %}"></a>  
        <p style="text-align: center;">{{like.title}}</p>
    </figure>
    
    {% endfor %}
  </div>
  
{% endblock %} 
